@use "cui-mixins" as mixins;
@use "cui-variants" as variants;

.cuiProgressContainer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  overflow: hidden;
  transition: all 100ms ease-in-out;
  @include mixins.cuiFullWidthStretch;
  min-height: 2px;
  gap: tokens.$clickFieldSpaceGap;
  border-radius: tokens.$clickFieldRadiiAll;
  font: var(--typography-styles-product-text-normal-sm);
  padding-right: 0;
  color: tokens.$clickGlobalColorAccentDefault;
  border: 1px solid tokens.$clickFieldColorStrokeDefault;
  background-size: calc(100% + 2px);
  background-position: center;

  // Orientation variants
  @include variants.variant('cuiOrientationHorizontal') {
    width: 100%;
    width: -webkit-fill-available;
    width: fill-available;
    width: stretch;
  }

  @include variants.variant('cuiOrientationVertical') {
    flex-direction: column;
    width: auto;
    height: 100%;
  }

  // Type styling with variant mixins
  @include variants.variant('cuiTypeDefault') {
    padding: 0.25rem tokens.$clickFieldSpaceX;
  }

  @include variants.variant('cuiTypeSmall') {
    padding: 0;
  }

  // Progress background based on status and direction
  @include variants.variant('cuiStatusIncomplete') {
    // Default: horizontal, start (to right)
    @include variants.variant('cuiOrientationHorizontal') {
      @include variants.variant('cuiDirStart') {
        background: linear-gradient(
          to right,
          tokens.$clickGlobalColorAccentDefault 0%,
          tokens.$clickGlobalColorAccentDefault var(--progress),
          tokens.$clickFieldColorBackgroundDefault var(--progress),
          tokens.$clickFieldColorBackgroundDefault 100%
        );
      }

      @include variants.variant('cuiDirEnd') {
        background: linear-gradient(
          to left,
          tokens.$clickGlobalColorAccentDefault 0%,
          tokens.$clickGlobalColorAccentDefault var(--progress),
          tokens.$clickFieldColorBackgroundDefault var(--progress),
          tokens.$clickFieldColorBackgroundDefault 100%
        );
      }
    }

    @include variants.variant('cuiOrientationVertical') {
      @include variants.variant('cuiDirStart') {
        background: linear-gradient(
          to bottom,
          tokens.$clickGlobalColorAccentDefault 0%,
          tokens.$clickGlobalColorAccentDefault var(--progress),
          tokens.$clickFieldColorBackgroundDefault var(--progress),
          tokens.$clickFieldColorBackgroundDefault 100%
        );
      }

      @include variants.variant('cuiDirEnd') {
        background: linear-gradient(
          to top,
          tokens.$clickGlobalColorAccentDefault 0%,
          tokens.$clickGlobalColorAccentDefault var(--progress),
          tokens.$clickFieldColorBackgroundDefault var(--progress),
          tokens.$clickFieldColorBackgroundDefault 100%
        );
      }
    }
  }

  @include variants.variant('cuiStatusComplete') {
    @include variants.variant('cuiTypeDefault') {
      background: tokens.$clickFieldColorBackgroundDefault;
    }
  }

  &:hover {
    border: 1px solid tokens.$clickFieldColorStrokeHover;
    background-size: calc(100% + 2px);
    background-position: center;

    @include variants.variant('cuiStatusIncomplete') {
      @include variants.variant('cuiOrientationHorizontal') {
        @include variants.variant('cuiDirStart') {
          background: linear-gradient(
            to right,
            tokens.$clickGlobalColorAccentDefault 0%,
            tokens.$clickGlobalColorAccentDefault var(--progress),
            tokens.$clickFieldColorBackgroundHover var(--progress),
            tokens.$clickFieldColorBackgroundHover 100%
          );
        }

        @include variants.variant('cuiDirEnd') {
          background: linear-gradient(
            to left,
            tokens.$clickGlobalColorAccentDefault 0%,
            tokens.$clickGlobalColorAccentDefault var(--progress),
            tokens.$clickFieldColorBackgroundHover var(--progress),
            tokens.$clickFieldColorBackgroundHover 100%
          );
        }
      }

      @include variants.variant('cuiOrientationVertical') {
        @include variants.variant('cuiDirStart') {
          background: linear-gradient(
            to bottom,
            tokens.$clickGlobalColorAccentDefault 0%,
            tokens.$clickGlobalColorAccentDefault var(--progress),
            tokens.$clickFieldColorBackgroundHover var(--progress),
            tokens.$clickFieldColorBackgroundHover 100%
          );
        }

        @include variants.variant('cuiDirEnd') {
          background: linear-gradient(
            to top,
            tokens.$clickGlobalColorAccentDefault 0%,
            tokens.$clickGlobalColorAccentDefault var(--progress),
            tokens.$clickFieldColorBackgroundHover var(--progress),
            tokens.$clickFieldColorBackgroundHover 100%
          );
        }
      }
    }

    @include variants.variant('cuiStatusComplete') {
      background: tokens.$clickFieldColorBackgroundHover;
    }
  }

  &:focus-within,
  &:focus {
    border: 1px solid tokens.$clickFieldColorStrokeActive;
    background-size: calc(100% + 2px);
    background-position: center;

    @include variants.variant('cuiStatusIncomplete') {
      @include variants.variant('cuiOrientationHorizontal') {
        @include variants.variant('cuiDirStart') {
          background: linear-gradient(
            to right,
            tokens.$clickGlobalColorAccentDefault 0%,
            tokens.$clickGlobalColorAccentDefault var(--progress),
            tokens.$clickFieldColorBackgroundActive var(--progress),
            tokens.$clickFieldColorBackgroundActive 100%
          );
        }

        @include variants.variant('cuiDirEnd') {
          background: linear-gradient(
            to left,
            tokens.$clickGlobalColorAccentDefault 0%,
            tokens.$clickGlobalColorAccentDefault var(--progress),
            tokens.$clickFieldColorBackgroundActive var(--progress),
            tokens.$clickFieldColorBackgroundActive 100%
          );
        }
      }

      @include variants.variant('cuiOrientationVertical') {
        @include variants.variant('cuiDirStart') {
          background: linear-gradient(
            to bottom,
            tokens.$clickGlobalColorAccentDefault 0%,
            tokens.$clickGlobalColorAccentDefault var(--progress),
            tokens.$clickFieldColorBackgroundActive var(--progress),
            tokens.$clickFieldColorBackgroundActive 100%
          );
        }

        @include variants.variant('cuiDirEnd') {
          background: linear-gradient(
            to top,
            tokens.$clickGlobalColorAccentDefault 0%,
            tokens.$clickGlobalColorAccentDefault var(--progress),
            tokens.$clickFieldColorBackgroundActive var(--progress),
            tokens.$clickFieldColorBackgroundActive 100%
          );
        }
      }
    }

    @include variants.variant('cuiStatusComplete') {
      background: tokens.$clickFieldColorBackgroundActive;
    }
  }
}

.cuiProgressText {
  width: 100%;
  font: inherit;
  mix-blend-mode: difference;
}

.cuiProgressCloseButton {
  mix-blend-mode: difference;
  border: 0;
  visibility: hidden;

  @include variants.variant('cuiVisible') {
    visibility: visible;
  }
}
