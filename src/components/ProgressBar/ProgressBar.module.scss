@use "cui-mixins" as mixins;
@use "cui-variants" as variants;

.cuiProgressContainer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  overflow: hidden;
  transition: all 100ms ease-in-out;
  @include mixins.cuiFullWidthStretch;
  min-height: 2px;
  gap: var(--click-field-space-gap);
  border-radius: var(--click-field-radii-all);
  font: var(--typography-styles-product-text-normal-sm);
  padding-right: 0;
  color: var(--global-color-accent-default);
  border: 1px solid var(--click-field-color-stroke-default);
  background-size: calc(100% + 2px);
  background-position: center;

  // Type styling with variant mixins
  @include variants.variant('cuiTypeDefault') {
    padding: 0.25rem var(--click-field-space-x);
  }

  @include variants.variant('cuiTypeSmall') {
    padding: 0;
  }

  // Progress background based on status
  @include variants.variant('cuiStatusIncomplete') {
    background: linear-gradient(
      to right,
      var(--global-color-accent-default) 0%,
      var(--global-color-accent-default) var(--progress),
      var(--click-field-color-background-default) var(--progress),
      var(--click-field-color-background-default) 100%
    );
  }

  @include variants.variant('cuiStatusComplete') {
    @include variants.variant('cuiTypeDefault') {
      background: var(--click-field-color-background-default);
    }
  }

  &:hover {
    border: 1px solid var(--click-field-color-stroke-hover);
    background-size: calc(100% + 2px);
    background-position: center;

    @include variants.variant('cuiStatusIncomplete') {
      background: linear-gradient(
        to right,
        var(--global-color-accent-default) 0%,
        var(--global-color-accent-default) var(--progress),
        var(--click-field-color-background-hover) var(--progress),
        var(--click-field-color-background-hover) 100%
      );
    }

    @include variants.variant('cuiStatusComplete') {
      background: var(--click-field-color-background-hover);
    }
  }

  &:focus-within,
  &:focus {
    border: 1px solid var(--click-field-color-stroke-active);
    background-size: calc(100% + 2px);
    background-position: center;

    @include variants.variant('cuiStatusIncomplete') {
      background: linear-gradient(
        to right,
        var(--global-color-accent-default) 0%,
        var(--global-color-accent-default) var(--progress),
        var(--click-field-color-background-active) var(--progress),
        var(--click-field-color-background-active) 100%
      );
    }

    @include variants.variant('cuiStatusComplete') {
      background: var(--click-field-color-background-active);
    }
  }
}

.cuiProgressText {
  width: 100%;
  font: inherit;
  mix-blend-mode: difference;
}

.cuiProgressCloseButton {
  mix-blend-mode: difference;
  border: 0;
  visibility: hidden;

  @include variants.variant('cuiVisible') {
    visibility: visible;
  }
}
