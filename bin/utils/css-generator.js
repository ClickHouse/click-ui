#!/usr/bin/env node

/**
 * CSS Generation for CLI
 * Used by CLI generate and build-default-theme commands
 */

import { generateLightDarkVariables, generateThemeOverrides } from '../../src/theme/utils/css-generator.js';
import { buildCSSOutput } from '../../src/theme/utils/css-builder.js';

/**
 * Generate CSS from theme config
 * Used by CLI generate command
 */
export function generateThemeCSS(config) {
  if (!config || (!config.theme && !config.dark)) {
    return '';
  }

  // Get light and dark themes
  const lightTheme = config.theme || {};
  const darkTheme = { ...config.theme, ...config.dark };

  // Generate variables using light-dark() for colors
  const lightDarkVars = generateLightDarkVariables(lightTheme, darkTheme);
  const themeOverrides = generateThemeOverrides(lightTheme, darkTheme);

  // Build CSS using shared builder
  return buildCSSOutput(lightDarkVars, themeOverrides, {
    headerComment: '/* Click UI Custom Theme */\n/* Generated by click-ui generate command */\n/* Uses light-dark() CSS function for automatic theme switching */\n'
  });
}
